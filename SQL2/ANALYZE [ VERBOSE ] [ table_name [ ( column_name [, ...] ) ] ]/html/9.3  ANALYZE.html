<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0058)http://www.postgresql.org/docs/9.3/static/sql-analyze.html -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>PostgreSQL: Documentation: 9.3: ANALYZE</title>
    <style type="text/css" media="screen" title="Normal Text">@import url("/media/css/docs.css");</style>
    <link rel="alternate stylesheet" media="screen" href="./9.3  ANALYZE_files/docs_large.css" type="text/css" title="Large Text" disabled="">
    <script type="text/javascript" async="" src="./9.3  ANALYZE_files/ga.js"></script><script type="text/javascript" src="./9.3  ANALYZE_files/styleswitcher.js"></script>
    <script type="text/javascript" src="./9.3  ANALYZE_files/monospacefix.js"></script></head><body><pre id="monotest" style="display: none;">&nbsp;</pre><p id="paratest" style="display: none;">&nbsp;</p><style type="text/css" media="screen">#docContainer tt, #docContainer pre, #docContainer code{font-size: 1.2em;}</style>

    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1345454-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


<div id="docHeader">
	<div id="docHeaderLogo">
		<a href="http://www.postgresql.org/" title="PostgreSQL"><img src="./9.3  ANALYZE_files/hdr_logo.png" width="206" height="80" alt="PostgreSQL"></a>
	</div>
</div>

<div id="docContainerWrap">
<div id="docContainer">
<div id="docNavSearchContainer">
<div id="docSearch">
	<form action="http://www.postgresql.org/search/" method="get">
	<div>
	<input type="hidden" name="u" value="/docs/9.3/">
	<label for="q">Search Documentation:&nbsp;</label><input type="text" id="q" name="q" size="20" onfocus="if( this.value==this.defaultValue ) this.value=&#39;&#39;;" value="Search"><input id="submit" type="submit" value="Search">
	</div>
	</form>
        <div id="docTextSize">Text Size: <a href="http://www.postgresql.org/docs/9.3/static/sql-analyze.html#" onclick="setActiveStyleSheet(&#39;Normal Text&#39;); return false;" onkeypress="return false;" title="Normal Text Size">Normal</a> / <a href="http://www.postgresql.org/docs/9.3/static/sql-analyze.html#" onclick="setActiveStyleSheet(&#39;Large Text&#39;); return false;" onkeypress="return false;" title="Large Text Size">Large</a></div>
</div>
<div id="docNav">
<a href="http://www.postgresql.org/" title="Home">Home</a> → <a href="http://www.postgresql.org/docs" title="Documentation">Documentation</a> → <a href="http://www.postgresql.org/docs/manuals" title="Manuals">Manuals</a> → <a href="http://www.postgresql.org/docs/9.3/static/index.html">PostgreSQL 9.3</a>
</div>
<div id="docVersions">

This page in other versions:

	
	
	<a href="http://www.postgresql.org/docs/9.2/static/sql-analyze.html" title="This page in version 9.2">9.2</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/9.1/static/sql-analyze.html" title="This page in version 9.1">9.1</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/9.0/static/sql-analyze.html" title="This page in version 9.0">9.0</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.4/static/sql-analyze.html" title="This page in version 8.4">8.4</a>
	



&nbsp;|&nbsp; Unsupported versions:

	
	
	<b>9.3</b>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.3/static/sql-analyze.html" title="This page in version 8.3" rel="nofollow">8.3</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.2/static/sql-analyze.html" title="This page in version 8.2" rel="nofollow">8.2</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.1/static/sql-analyze.html" title="This page in version 8.1" rel="nofollow">8.1</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.0/static/sql-analyze.html" title="This page in version 8.0" rel="nofollow">8.0</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/7.4/static/sql-analyze.html" title="This page in version 7.4" rel="nofollow">7.4</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/7.3/static/sql-analyze.html" title="This page in version 7.3" rel="nofollow">7.3</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/7.2/static/sql-analyze.html" title="This page in version 7.2" rel="nofollow">7.2</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/devel/static/sql-analyze.html" title="This page in version devel" rel="nofollow">devel</a>
	


</div>
</div>

<div id="docContent">
<div class="NAVHEADER">
  <table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
    <tbody><tr>
      <th colspan="5" align="center" valign="bottom"><a href="http://www.postgresql.org/docs/9.3/static/index.html">PostgreSQL 9.3beta2 Documentation</a></th>
    </tr>

    <tr>
      <td width="10%" align="left" valign="top"><a title="ALTER VIEW" href="http://www.postgresql.org/docs/9.3/static/sql-alterview.html" accesskey="P">Prev</a></td>

      <td width="10%" align="left" valign="top"><a href="http://www.postgresql.org/docs/9.3/static/sql-commands.html" accesskey="U">Up</a></td>

      <td width="60%" align="center" valign="bottom"></td>

      <td width="20%" align="right" valign="top"><a title="BEGIN" href="http://www.postgresql.org/docs/9.3/static/sql-begin.html" accesskey="N">Next</a></td>
    </tr>
  </tbody></table>
  <hr class="c1" width="100%">
</div>

<h1><a name="SQL-ANALYZE" id="SQL-ANALYZE"></a>ANALYZE</h1>

<div class="REFNAMEDIV">
  <a name="AEN67844" id="AEN67844"></a>

  <h2>Name</h2>ANALYZE&nbsp;--&nbsp;collect statistics about a
  database
</div>

<div class="REFSYNOPSISDIV">
  <a name="AEN67849" id="AEN67849"></a>

  <h2>Synopsis</h2>
  <pre class="SYNOPSIS">ANALYZE [ VERBOSE ] [ <tt class="REPLACEABLE c2">table_name</tt> [ ( <tt class="REPLACEABLE c2">column_name</tt> [, ...] ) ] ]
</pre>
</div>

<div class="REFSECT1">
  <a name="AEN67853" id="AEN67853"></a>

  <h2>Description</h2>

  <p><tt class="COMMAND">ANALYZE</tt> collects statistics about the
  contents of tables in the database, and stores the results in the
  <a href="http://www.postgresql.org/docs/9.3/static/catalog-pg-statistic.html"><tt class="STRUCTNAME">pg_statistic</tt></a> system catalog. Subsequently,
  the query planner uses these statistics to help determine the
  most efficient execution plans for queries.</p>

  <p>With no parameter, <tt class="COMMAND">ANALYZE</tt> examines
  every table in the current database. With a parameter, <tt class="COMMAND">ANALYZE</tt> examines only that table. It is further
  possible to give a list of column names, in which case only the
  statistics for those columns are collected.</p>
</div>

<div class="REFSECT1">
  <a name="AEN67862" id="AEN67862"></a>

  <h2>Parameters</h2>

  <div class="VARIABLELIST">
    <dl>
      <dt><tt class="LITERAL">VERBOSE</tt></dt>

      <dd>
        <p>Enables display of progress messages.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">table_name</tt></dt>

      <dd>
        <p>The name (possibly schema-qualified) of a specific table
        to analyze. If omitted, all regular tables (but not foreign
        tables) in the current database are analyzed.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">column_name</tt></dt>

      <dd>
        <p>The name of a specific column to analyze. Defaults to
        all columns.</p>
      </dd>
    </dl>
  </div>
</div>

<div class="REFSECT1">
  <a name="AEN67880" id="AEN67880"></a>

  <h2>Outputs</h2>

  <p>When <tt class="LITERAL">VERBOSE</tt> is specified, <tt class="COMMAND">ANALYZE</tt> emits progress messages to indicate which
  table is currently being processed. Various statistics about the
  tables are printed as well.</p>
</div>

<div class="REFSECT1">
  <a name="AEN67885" id="AEN67885"></a>

  <h2>Notes</h2>

  <p>Foreign tables are analyzed only when explicitly selected. Not
  all foreign data wrappers support <tt class="COMMAND">ANALYZE</tt>. If the table's wrapper does not support
  <tt class="COMMAND">ANALYZE</tt>, the command prints a warning
  and does nothing.</p>

  <p>In the default <span class="PRODUCTNAME">PostgreSQL</span>
  configuration, the autovacuum daemon (see <a href="http://www.postgresql.org/docs/9.3/static/routine-vacuuming.html#AUTOVACUUM">Section 23.1.6</a>) takes
  care of automatic analyzing of tables when they are first loaded
  with data, and as they change throughout regular operation. When
  autovacuum is disabled, it is a good idea to run <tt class="COMMAND">ANALYZE</tt> periodically, or just after making major
  changes in the contents of a table. Accurate statistics will help
  the planner to choose the most appropriate query plan, and
  thereby improve the speed of query processing. A common strategy
  for read-mostly databases is to run <a href="http://www.postgresql.org/docs/9.3/static/sql-vacuum.html">VACUUM</a> and <tt class="COMMAND">ANALYZE</tt>
  once a day during a low-usage time of day. (This will not be
  sufficient if there is heavy update activity.)</p>

  <p><tt class="COMMAND">ANALYZE</tt> requires only a read lock on
  the target table, so it can run in parallel with other activity
  on the table.</p>

  <p>The statistics collected by <tt class="COMMAND">ANALYZE</tt>
  usually include a list of some of the most common values in each
  column and a histogram showing the approximate data distribution
  in each column. One or both of these can be omitted if <tt class="COMMAND">ANALYZE</tt> deems them uninteresting (for example, in
  a unique-key column, there are no common values) or if the column
  data type does not support the appropriate operators. There is
  more information about the statistics in <a href="http://www.postgresql.org/docs/9.3/static/maintenance.html">Chapter 23</a>.</p>

  <p>For large tables, <tt class="COMMAND">ANALYZE</tt> takes a
  random sample of the table contents, rather than examining every
  row. This allows even very large tables to be analyzed in a small
  amount of time. Note, however, that the statistics are only
  approximate, and will change slightly each time <tt class="COMMAND">ANALYZE</tt> is run, even if the actual table contents
  did not change. This might result in small changes in the
  planner's estimated costs shown by <a href="http://www.postgresql.org/docs/9.3/static/sql-explain.html">EXPLAIN</a>. In rare situations, this
  non-determinism will cause the planner's choices of query plans
  to change after <tt class="COMMAND">ANALYZE</tt> is run. To avoid
  this, raise the amount of statistics collected by <tt class="COMMAND">ANALYZE</tt>, as described below.</p>

  <p>The extent of analysis can be controlled by adjusting the
  <a href="http://www.postgresql.org/docs/9.3/static/runtime-config-query.html#GUC-DEFAULT-STATISTICS-TARGET">default_statistics_target</a>
  configuration variable, or on a column-by-column basis by setting
  the per-column statistics target with <tt class="COMMAND">ALTER
  TABLE ... ALTER COLUMN ... SET STATISTICS</tt> (see <a href="http://www.postgresql.org/docs/9.3/static/sql-altertable.html">ALTER TABLE</a>). The target value sets the
  maximum number of entries in the most-common-value list and the
  maximum number of bins in the histogram. The default target value
  is 100, but this can be adjusted up or down to trade off accuracy
  of planner estimates against the time taken for <tt class="COMMAND">ANALYZE</tt> and the amount of space occupied in
  <tt class="LITERAL">pg_statistic</tt>. In particular, setting the
  statistics target to zero disables collection of statistics for
  that column. It might be useful to do that for columns that are
  never used as part of the <tt class="LITERAL">WHERE</tt>,
  <tt class="LITERAL">GROUP BY</tt>, or <tt class="LITERAL">ORDER
  BY</tt> clauses of queries, since the planner will have no use
  for statistics on such columns.</p>

  <p>The largest statistics target among the columns being analyzed
  determines the number of table rows sampled to prepare the
  statistics. Increasing the target causes a proportional increase
  in the time and space needed to do <tt class="COMMAND">ANALYZE</tt>.</p>

  <p>One of the values estimated by <tt class="COMMAND">ANALYZE</tt> is the number of distinct values that
  appear in each column. Because only a subset of the rows are
  examined, this estimate can sometimes be quite inaccurate, even
  with the largest possible statistics target. If this inaccuracy
  leads to bad query plans, a more accurate value can be determined
  manually and then installed with <tt class="COMMAND">ALTER TABLE
  ... ALTER COLUMN ... SET (n_distinct = ...)</tt> (see <a href="http://www.postgresql.org/docs/9.3/static/sql-altertable.html">ALTER TABLE</a>).</p>

  <p>If the table being analyzed has one or more children,
  <tt class="COMMAND">ANALYZE</tt> will gather statistics twice:
  once on the rows of the parent table only, and a second time on
  the rows of the parent table with all of its children. This
  second set of statistics is needed when planning queries that
  traverse the entire inheritance tree. The autovacuum daemon,
  however, will only consider inserts or updates on the parent
  table itself when deciding whether to trigger an automatic
  analyze for that table. If that table is rarely inserted into or
  updated, the inheritance statistics will not be up to date unless
  you run <tt class="COMMAND">ANALYZE</tt> manually.</p>

  <p>If the table being analyzed is completely empty, <tt class="COMMAND">ANALYZE</tt> will not record new statistics for that
  table. Any existing statistics will be retained.</p>
</div>

<div class="REFSECT1">
  <a name="AEN67928" id="AEN67928"></a>

  <h2>Compatibility</h2>

  <p>There is no <tt class="COMMAND">ANALYZE</tt> statement in the
  SQL standard.</p>
</div>

<div class="REFSECT1">
  <a name="AEN67932" id="AEN67932"></a>

  <h2>See Also</h2><a href="http://www.postgresql.org/docs/9.3/static/sql-vacuum.html">VACUUM</a>, <a href="http://www.postgresql.org/docs/9.3/static/app-vacuumdb.html"><span class="APPLICATION">vacuumdb</span></a>, <a href="http://www.postgresql.org/docs/9.3/static/runtime-config-resource.html#RUNTIME-CONFIG-RESOURCE-VACUUM-COST">
  Section 18.4.4</a>, <a href="http://www.postgresql.org/docs/9.3/static/routine-vacuuming.html#AUTOVACUUM">Section 23.1.6</a>
</div>

<div class="NAVFOOTER">
  <hr class="c1" width="100%">

  <table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
    <tbody><tr>
      <td width="33%" align="left" valign="top"><a href="http://www.postgresql.org/docs/9.3/static/sql-alterview.html" accesskey="P">Prev</a></td>

      <td width="34%" align="center" valign="top"><a href="http://www.postgresql.org/docs/9.3/static/index.html" accesskey="H">Home</a></td>

      <td width="33%" align="right" valign="top"><a href="http://www.postgresql.org/docs/9.3/static/sql-begin.html" accesskey="N">Next</a></td>
    </tr>

    <tr>
      <td width="33%" align="left" valign="top">ALTER VIEW</td>

      <td width="34%" align="center" valign="top"><a href="http://www.postgresql.org/docs/9.3/static/sql-commands.html" accesskey="U">Up</a></td>

      <td width="33%" align="right" valign="top">BEGIN</td>
    </tr>
  </tbody></table>
</div>

</div>

<div id="docComments">



</div>

<div id="docFooter">
    <a href="http://www.postgresql.org/about/privacypolicy">Privacy Policy</a> |
    <a href="http://www.postgresql.org/about/">About PostgreSQL</a><br>
Copyright © 1996-2013 The PostgreSQL Global Development Group
</div>
</div>
</div>


</body></html>