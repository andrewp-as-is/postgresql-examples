<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0058)http://www.postgresql.org/docs/9.3/static/sql-explain.html -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>PostgreSQL: Documentation: 9.3: EXPLAIN</title>
    <style type="text/css" media="screen" title="Normal Text">@import url("/media/css/docs.css");</style>
    <link rel="alternate stylesheet" media="screen" href="./9.3  EXPLAIN_files/docs_large.css" type="text/css" title="Large Text" disabled="">
    <script type="text/javascript" async="" src="./9.3  EXPLAIN_files/ga.js"></script><script type="text/javascript" src="./9.3  EXPLAIN_files/styleswitcher.js"></script>
    <script type="text/javascript" src="./9.3  EXPLAIN_files/monospacefix.js"></script></head><body><pre id="monotest" style="display: none;">&nbsp;</pre><p id="paratest" style="display: none;">&nbsp;</p><style type="text/css" media="screen">#docContainer tt, #docContainer pre, #docContainer code{font-size: 1.2em;}</style>

    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1345454-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


<div id="docHeader">
	<div id="docHeaderLogo">
		<a href="http://www.postgresql.org/" title="PostgreSQL"><img src="./9.3  EXPLAIN_files/hdr_logo.png" width="206" height="80" alt="PostgreSQL"></a>
	</div>
</div>

<div id="docContainerWrap">
<div id="docContainer">
<div id="docNavSearchContainer">
<div id="docSearch">
	<form action="http://www.postgresql.org/search/" method="get">
	<div>
	<input type="hidden" name="u" value="/docs/9.3/">
	<label for="q">Search Documentation:&nbsp;</label><input type="text" id="q" name="q" size="20" onfocus="if( this.value==this.defaultValue ) this.value=&#39;&#39;;" value="Search"><input id="submit" type="submit" value="Search">
	</div>
	</form>
        <div id="docTextSize">Text Size: <a href="http://www.postgresql.org/docs/9.3/static/sql-explain.html#" onclick="setActiveStyleSheet(&#39;Normal Text&#39;); return false;" onkeypress="return false;" title="Normal Text Size">Normal</a> / <a href="http://www.postgresql.org/docs/9.3/static/sql-explain.html#" onclick="setActiveStyleSheet(&#39;Large Text&#39;); return false;" onkeypress="return false;" title="Large Text Size">Large</a></div>
</div>
<div id="docNav">
<a href="http://www.postgresql.org/" title="Home">Home</a> → <a href="http://www.postgresql.org/docs" title="Documentation">Documentation</a> → <a href="http://www.postgresql.org/docs/manuals" title="Manuals">Manuals</a> → <a href="http://www.postgresql.org/docs/9.3/static/index.html">PostgreSQL 9.3</a>
</div>
<div id="docVersions">

This page in other versions:

	
	
	<a href="http://www.postgresql.org/docs/9.2/static/sql-explain.html" title="This page in version 9.2">9.2</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/9.1/static/sql-explain.html" title="This page in version 9.1">9.1</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/9.0/static/sql-explain.html" title="This page in version 9.0">9.0</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.4/static/sql-explain.html" title="This page in version 8.4">8.4</a>
	



&nbsp;|&nbsp; Unsupported versions:

	
	
	<b>9.3</b>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.3/static/sql-explain.html" title="This page in version 8.3" rel="nofollow">8.3</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.2/static/sql-explain.html" title="This page in version 8.2" rel="nofollow">8.2</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.1/static/sql-explain.html" title="This page in version 8.1" rel="nofollow">8.1</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.0/static/sql-explain.html" title="This page in version 8.0" rel="nofollow">8.0</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/7.4/static/sql-explain.html" title="This page in version 7.4" rel="nofollow">7.4</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/7.3/static/sql-explain.html" title="This page in version 7.3" rel="nofollow">7.3</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/7.2/static/sql-explain.html" title="This page in version 7.2" rel="nofollow">7.2</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/7.1/static/sql-explain.html" title="This page in version 7.1" rel="nofollow">7.1</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/devel/static/sql-explain.html" title="This page in version devel" rel="nofollow">devel</a>
	


</div>
</div>

<div id="docContent">
<div class="NAVHEADER">
  <table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
    <tbody><tr>
      <th colspan="5" align="center" valign="bottom"><a href="http://www.postgresql.org/docs/9.3/static/index.html">PostgreSQL 9.3beta2 Documentation</a></th>
    </tr>

    <tr>
      <td width="10%" align="left" valign="top"><a title="EXECUTE" href="http://www.postgresql.org/docs/9.3/static/sql-execute.html" accesskey="P">Prev</a></td>

      <td width="10%" align="left" valign="top"><a href="http://www.postgresql.org/docs/9.3/static/sql-commands.html" accesskey="U">Up</a></td>

      <td width="60%" align="center" valign="bottom"></td>

      <td width="20%" align="right" valign="top"><a title="FETCH" href="http://www.postgresql.org/docs/9.3/static/sql-fetch.html" accesskey="N">Next</a></td>
    </tr>
  </tbody></table>
  <hr class="c1" width="100%">
</div>

<h1><a name="SQL-EXPLAIN" id="SQL-EXPLAIN"></a>EXPLAIN</h1>

<div class="REFNAMEDIV">
  <a name="AEN77372" id="AEN77372"></a>

  <h2>Name</h2>EXPLAIN&nbsp;--&nbsp;show the execution plan of a
  statement
</div>

<div class="REFSYNOPSISDIV">
  <a name="AEN77383" id="AEN77383"></a>

  <h2>Synopsis</h2>
  <pre class="SYNOPSIS">EXPLAIN [ ( <tt class="REPLACEABLE c2">option</tt> [, ...] ) ] <tt class="REPLACEABLE c2">statement</tt>
EXPLAIN [ ANALYZE ] [ VERBOSE ] <tt class="REPLACEABLE c2">statement</tt>

<span class="phrase PHRASE">where <tt class="REPLACEABLE c2">option</tt> can be one of:</span>

    ANALYZE [ <tt class="REPLACEABLE c2">boolean</tt> ]
    VERBOSE [ <tt class="REPLACEABLE c2">boolean</tt> ]
    COSTS [ <tt class="REPLACEABLE c2">boolean</tt> ]
    BUFFERS [ <tt class="REPLACEABLE c2">boolean</tt> ]
    TIMING [ <tt class="REPLACEABLE c2">boolean</tt> ]
    FORMAT { TEXT | XML | JSON | YAML }
</pre>
</div>

<div class="REFSECT1">
  <a name="AEN77395" id="AEN77395"></a>

  <h2>Description</h2>

  <p>This command displays the execution plan that the <span class="PRODUCTNAME">PostgreSQL</span> planner generates for the
  supplied statement. The execution plan shows how the table(s)
  referenced by the statement will be scanned — by plain sequential
  scan, index scan, etc. — and if multiple tables are referenced,
  what join algorithms will be used to bring together the required
  rows from each input table.</p>

  <p>The most critical part of the display is the estimated
  statement execution cost, which is the planner's guess at how
  long it will take to run the statement (measured in cost units
  that are arbitrary, but conventionally mean disk page fetches).
  Actually two numbers are shown: the start-up cost before the
  first row can be returned, and the total cost to return all the
  rows. For most queries the total cost is what matters, but in
  contexts such as a subquery in <tt class="LITERAL">EXISTS</tt>,
  the planner will choose the smallest start-up cost instead of the
  smallest total cost (since the executor will stop after getting
  one row, anyway). Also, if you limit the number of rows to return
  with a <tt class="LITERAL">LIMIT</tt> clause, the planner makes
  an appropriate interpolation between the endpoint costs to
  estimate which plan is really the cheapest.</p>

  <p>The <tt class="LITERAL">ANALYZE</tt> option causes the
  statement to be actually executed, not only planned. Then actual
  run time statistics are added to the display, including the total
  elapsed time expended within each plan node (in milliseconds) and
  the total number of rows it actually returned. This is useful for
  seeing whether the planner's estimates are close to reality.</p>

  <div class="IMPORTANT">
    <blockquote class="IMPORTANT">
      <p><b>Important:</b> Keep in mind that the statement is
      actually executed when the <tt class="LITERAL">ANALYZE</tt>
      option is used. Although <tt class="COMMAND">EXPLAIN</tt>
      will discard any output that a <tt class="COMMAND">SELECT</tt> would return, other side effects of the
      statement will happen as usual. If you wish to use <tt class="COMMAND">EXPLAIN ANALYZE</tt> on an <tt class="COMMAND">INSERT</tt>, <tt class="COMMAND">UPDATE</tt>,
      <tt class="COMMAND">DELETE</tt>, <tt class="COMMAND">CREATE
      TABLE AS</tt>, or <tt class="COMMAND">EXECUTE</tt> statement
      without letting the command affect your data, use this
      approach:</p>
      <pre class="PROGRAMLISTING">BEGIN;
EXPLAIN ANALYZE ...;
ROLLBACK;
</pre>
    </blockquote>
  </div>

  <p>Only the <tt class="LITERAL">ANALYZE</tt> and <tt class="LITERAL">VERBOSE</tt> options can be specified, and only in that
  order, without surrounding the option list in parentheses. Prior
  to <span class="PRODUCTNAME">PostgreSQL</span> 9.0, the
  unparenthesized syntax was the only one supported. It is expected
  that all new options will be supported only in the parenthesized
  syntax.</p>
</div>

<div class="REFSECT1">
  <a name="AEN77420" id="AEN77420"></a>

  <h2>Parameters</h2>

  <div class="VARIABLELIST">
    <dl>
      <dt><tt class="LITERAL">ANALYZE</tt></dt>

      <dd>
        <p>Carry out the command and show actual run times and
        other statistics. This parameter defaults to <tt class="LITERAL">FALSE</tt>.</p>
      </dd>

      <dt><tt class="LITERAL">VERBOSE</tt></dt>

      <dd>
        <p>Display additional information regarding the plan.
        Specifically, include the output column list for each node
        in the plan tree, schema-qualify table and function names,
        always label variables in expressions with their range
        table alias, and always print the name of each trigger for
        which statistics are displayed. This parameter defaults to
        <tt class="LITERAL">FALSE</tt>.</p>
      </dd>

      <dt><tt class="LITERAL">COSTS</tt></dt>

      <dd>
        <p>Include information on the estimated startup and total
        cost of each plan node, as well as the estimated number of
        rows and the estimated width of each row. This parameter
        defaults to <tt class="LITERAL">TRUE</tt>.</p>
      </dd>

      <dt><tt class="LITERAL">BUFFERS</tt></dt>

      <dd>
        <p>Include information on buffer usage. Specifically,
        include the number of shared blocks hit, read, dirtied, and
        written, the number of local blocks hit, read, dirtied, and
        written, and the number of temp blocks read and written. A
        <span class="emphasis EMPHASIS c3">hit</span> means that a
        read was avoided because the block was found already in
        cache when needed. Shared blocks contain data from regular
        tables and indexes; local blocks contain data from
        temporary tables and indexes; while temp blocks contain
        short-term working data used in sorts, hashes, Materialize
        plan nodes, and similar cases. The number of blocks
        <span class="emphasis EMPHASIS c3">dirtied</span> indicates
        the number of previously unmodified blocks that were
        changed by this query; while the number of blocks
        <span class="emphasis EMPHASIS c3">written</span> indicates
        the number of previously-dirtied blocks evicted from cache
        by this backend during query processing. The number of
        blocks shown for an upper-level node includes those used by
        all its child nodes. In text format, only non-zero values
        are printed. This parameter may only be used when
        <tt class="LITERAL">ANALYZE</tt> is also enabled. It
        defaults to <tt class="LITERAL">FALSE</tt>.</p>
      </dd>

      <dt><tt class="LITERAL">TIMING</tt></dt>

      <dd>
        <p>Include actual startup time and time spent in each node
        in the output. The overhead of repeatedly reading the
        system clock can slow down the query significantly on some
        systems, so it may be useful to set this parameter to
        <tt class="LITERAL">FALSE</tt> when only actual row counts,
        and not exact times, are needed. Run time of the entire
        statement is always measured, even when node-level timing
        is turned off with this option. This parameter may only be
        used when <tt class="LITERAL">ANALYZE</tt> is also enabled.
        It defaults to <tt class="LITERAL">TRUE</tt>.</p>
      </dd>

      <dt><tt class="LITERAL">FORMAT</tt></dt>

      <dd>
        <p>Specify the output format, which can be TEXT, XML, JSON,
        or YAML. Non-text output contains the same information as
        the text output format, but is easier for programs to
        parse. This parameter defaults to <tt class="LITERAL">TEXT</tt>.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">boolean</tt></dt>

      <dd>
        <p>Specifies whether the selected option should be turned
        on or off. You can write <tt class="LITERAL">TRUE</tt>,
        <tt class="LITERAL">ON</tt>, or <tt class="LITERAL">1</tt>
        to enable the option, and <tt class="LITERAL">FALSE</tt>,
        <tt class="LITERAL">OFF</tt>, or <tt class="LITERAL">0</tt>
        to disable it. The <tt class="REPLACEABLE c2">boolean</tt>
        value can also be omitted, in which case <tt class="LITERAL">TRUE</tt> is assumed.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">statement</tt></dt>

      <dd>
        <p>Any <tt class="COMMAND">SELECT</tt>, <tt class="COMMAND">INSERT</tt>, <tt class="COMMAND">UPDATE</tt>,
        <tt class="COMMAND">DELETE</tt>, <tt class="COMMAND">VALUES</tt>, <tt class="COMMAND">EXECUTE</tt>,
        <tt class="COMMAND">DECLARE</tt>, or <tt class="COMMAND">CREATE TABLE AS</tt> statement, whose execution
        plan you wish to see.</p>
      </dd>
    </dl>
  </div>
</div>

<div class="REFSECT1">
  <a name="AEN77491" id="AEN77491"></a>

  <h2>Outputs</h2>

  <p>The command's result is a textual description of the plan
  selected for the <tt class="REPLACEABLE c2">statement</tt>,
  optionally annotated with execution statistics. <a href="http://www.postgresql.org/docs/9.3/static/using-explain.html">Section 14.1</a> describes the information
  provided.</p>
</div>

<div class="REFSECT1">
  <a name="AEN77496" id="AEN77496"></a>

  <h2>Notes</h2>

  <p>In order to allow the <span class="PRODUCTNAME">PostgreSQL</span> query planner to make reasonably
  informed decisions when optimizing queries, the <a href="http://www.postgresql.org/docs/9.3/static/catalog-pg-statistic.html"><tt class="STRUCTNAME">pg_statistic</tt></a> data should be up-to-date for
  all tables used in the query. Normally the <a href="http://www.postgresql.org/docs/9.3/static/routine-vacuuming.html#AUTOVACUUM">autovacuum daemon</a> will
  take care of that automatically. But if a table has recently had
  substantial changes in its contents, you might need to do a
  manual <a href="http://www.postgresql.org/docs/9.3/static/sql-analyze.html">ANALYZE</a> rather than wait
  for autovacuum to catch up with the changes.</p>

  <p>In order to measure the run-time cost of each node in the
  execution plan, the current implementation of <tt class="COMMAND">EXPLAIN ANALYZE</tt> adds profiling overhead to query
  execution. As a result, running <tt class="COMMAND">EXPLAIN
  ANALYZE</tt> on a query can sometimes take significantly longer
  than executing the query normally. The amount of overhead depends
  on the nature of the query, as well as the platform being used.
  The worst case occurs for plan nodes that in themselves require
  very little time per execution, and on machines that have
  relatively slow operating system calls for obtaining the time of
  day.</p>
</div>

<div class="REFSECT1">
  <a name="AEN77507" id="AEN77507"></a>

  <h2>Examples</h2>

  <p>To show the plan for a simple query on a table with a single
  <tt class="TYPE">integer</tt> column and 10000 rows:</p>
  <pre class="PROGRAMLISTING">EXPLAIN SELECT * FROM foo;

                       QUERY PLAN
---------------------------------------------------------
 Seq Scan on foo  (cost=0.00..155.00 rows=10000 width=4)
(1 row)
</pre>

  <p>Here is the same query, with JSON output formatting:</p>
  <pre class="PROGRAMLISTING">EXPLAIN (FORMAT JSON) SELECT * FROM foo;
           QUERY PLAN
--------------------------------
 [                             +
   {                           +
     "Plan": {                 +
       "Node Type": "Seq Scan",+
       "Relation Name": "foo", +
       "Alias": "foo",         +
       "Startup Cost": 0.00,   +
       "Total Cost": 155.00,   +
       "Plan Rows": 10000,     +
       "Plan Width": 4         +
     }                         +
   }                           +
 ]
(1 row)
</pre>

  <p>If there is an index and we use a query with an indexable
  <tt class="LITERAL">WHERE</tt> condition, <tt class="COMMAND">EXPLAIN</tt> might show a different plan:</p>
  <pre class="PROGRAMLISTING">EXPLAIN SELECT * FROM foo WHERE i = 4;

                         QUERY PLAN
--------------------------------------------------------------
 Index Scan using fi on foo  (cost=0.00..5.98 rows=1 width=4)
   Index Cond: (i = 4)
(2 rows)
</pre>

  <p>Here is the same query, but in YAML format:</p>
  <pre class="PROGRAMLISTING">EXPLAIN (FORMAT YAML) SELECT * FROM foo WHERE i='4';
          QUERY PLAN
-------------------------------
 - Plan:                      +
     Node Type: "Index Scan"  +
     Scan Direction: "Forward"+
     Index Name: "fi"         +
     Relation Name: "foo"     +
     Alias: "foo"             +
     Startup Cost: 0.00       +
     Total Cost: 5.98         +
     Plan Rows: 1             +
     Plan Width: 4            +
     Index Cond: "(i = 4)"
(1 row)
</pre>

  <p>XML format is left as an exercise for the reader.</p>

  <p>Here is the same plan with cost estimates suppressed:</p>
  <pre class="PROGRAMLISTING">EXPLAIN (COSTS FALSE) SELECT * FROM foo WHERE i = 4;

        QUERY PLAN
----------------------------
 Index Scan using fi on foo
   Index Cond: (i = 4)
(2 rows)
</pre>

  <p>Here is an example of a query plan for a query using an
  aggregate function:</p>
  <pre class="PROGRAMLISTING">EXPLAIN SELECT sum(i) FROM foo WHERE i &lt; 10;

                             QUERY PLAN
---------------------------------------------------------------------
 Aggregate  (cost=23.93..23.93 rows=1 width=4)
   -&gt;  Index Scan using fi on foo  (cost=0.00..23.92 rows=6 width=4)
         Index Cond: (i &lt; 10)
(3 rows)
</pre>

  <p>Here is an example of using <tt class="COMMAND">EXPLAIN
  EXECUTE</tt> to display the execution plan for a prepared
  query:</p>
  <pre class="PROGRAMLISTING">PREPARE query(int, int) AS SELECT sum(bar) FROM test
    WHERE id &gt; $1 AND id &lt; $2
    GROUP BY foo;

EXPLAIN ANALYZE EXECUTE query(100, 200);

                                                       QUERY PLAN
-------------------------------------------------------------------------------------------------------------------------
 HashAggregate  (cost=39.53..39.53 rows=1 width=8) (actual time=0.661..0.672 rows=7 loops=1)
   -&gt;  Index Scan using test_pkey on test  (cost=0.00..32.97 rows=1311 width=8) (actual time=0.050..0.395 rows=99 loops=1)
         Index Cond: ((id &gt; $1) AND (id &lt; $2))
 Total runtime: 0.851 ms
(4 rows)
</pre>

  <p>Of course, the specific numbers shown here depend on the
  actual contents of the tables involved. Also note that the
  numbers, and even the selected query strategy, might vary between
  <span class="PRODUCTNAME">PostgreSQL</span> releases due to
  planner improvements. In addition, the <tt class="COMMAND">ANALYZE</tt> command uses random sampling to estimate
  data statistics; therefore, it is possible for cost estimates to
  change after a fresh run of <tt class="COMMAND">ANALYZE</tt>,
  even if the actual distribution of data in the table has not
  changed.</p>
</div>

<div class="REFSECT1">
  <a name="AEN77531" id="AEN77531"></a>

  <h2>Compatibility</h2>

  <p>There is no <tt class="COMMAND">EXPLAIN</tt> statement defined
  in the SQL standard.</p>
</div>

<div class="REFSECT1">
  <a name="AEN77535" id="AEN77535"></a>

  <h2>See Also</h2><a href="http://www.postgresql.org/docs/9.3/static/sql-analyze.html">ANALYZE</a>
</div>

<div class="NAVFOOTER">
  <hr class="c1" width="100%">

  <table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
    <tbody><tr>
      <td width="33%" align="left" valign="top"><a href="http://www.postgresql.org/docs/9.3/static/sql-execute.html" accesskey="P">Prev</a></td>

      <td width="34%" align="center" valign="top"><a href="http://www.postgresql.org/docs/9.3/static/index.html" accesskey="H">Home</a></td>

      <td width="33%" align="right" valign="top"><a href="http://www.postgresql.org/docs/9.3/static/sql-fetch.html" accesskey="N">Next</a></td>
    </tr>

    <tr>
      <td width="33%" align="left" valign="top">EXECUTE</td>

      <td width="34%" align="center" valign="top"><a href="http://www.postgresql.org/docs/9.3/static/sql-commands.html" accesskey="U">Up</a></td>

      <td width="33%" align="right" valign="top">FETCH</td>
    </tr>
  </tbody></table>
</div>

</div>

<div id="docComments">



</div>

<div id="docFooter">
    <a href="http://www.postgresql.org/about/privacypolicy">Privacy Policy</a> |
    <a href="http://www.postgresql.org/about/">About PostgreSQL</a><br>
Copyright © 1996-2013 The PostgreSQL Global Development Group
</div>
</div>
</div>


</body></html>