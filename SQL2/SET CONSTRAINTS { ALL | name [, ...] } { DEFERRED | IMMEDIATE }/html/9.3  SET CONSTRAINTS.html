<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0066)http://www.postgresql.org/docs/9.3/static/sql-set-constraints.html -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>PostgreSQL: Documentation: 9.3: SET CONSTRAINTS</title>
    <style type="text/css" media="screen" title="Normal Text">@import url("/media/css/docs.css");</style>
    <link rel="alternate stylesheet" media="screen" href="./9.3  SET CONSTRAINTS_files/docs_large.css" type="text/css" title="Large Text" disabled="">
    <script type="text/javascript" async="" src="./9.3  SET CONSTRAINTS_files/ga.js"></script><script type="text/javascript" src="./9.3  SET CONSTRAINTS_files/styleswitcher.js"></script>
    <script type="text/javascript" src="./9.3  SET CONSTRAINTS_files/monospacefix.js"></script></head><body><pre id="monotest" style="display: none;">&nbsp;</pre><p id="paratest" style="display: none;">&nbsp;</p><style type="text/css" media="screen">#docContainer tt, #docContainer pre, #docContainer code{font-size: 1.2em;}</style>

    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1345454-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


<div id="docHeader">
	<div id="docHeaderLogo">
		<a href="http://www.postgresql.org/" title="PostgreSQL"><img src="./9.3  SET CONSTRAINTS_files/hdr_logo.png" width="206" height="80" alt="PostgreSQL"></a>
	</div>
</div>

<div id="docContainerWrap">
<div id="docContainer">
<div id="docNavSearchContainer">
<div id="docSearch">
	<form action="http://www.postgresql.org/search/" method="get">
	<div>
	<input type="hidden" name="u" value="/docs/9.3/">
	<label for="q">Search Documentation:&nbsp;</label><input type="text" id="q" name="q" size="20" onfocus="if( this.value==this.defaultValue ) this.value=&#39;&#39;;" value="Search"><input id="submit" type="submit" value="Search">
	</div>
	</form>
        <div id="docTextSize">Text Size: <a href="http://www.postgresql.org/docs/9.3/static/sql-set-constraints.html#" onclick="setActiveStyleSheet(&#39;Normal Text&#39;); return false;" onkeypress="return false;" title="Normal Text Size">Normal</a> / <a href="http://www.postgresql.org/docs/9.3/static/sql-set-constraints.html#" onclick="setActiveStyleSheet(&#39;Large Text&#39;); return false;" onkeypress="return false;" title="Large Text Size">Large</a></div>
</div>
<div id="docNav">
<a href="http://www.postgresql.org/" title="Home">Home</a> → <a href="http://www.postgresql.org/docs" title="Documentation">Documentation</a> → <a href="http://www.postgresql.org/docs/manuals" title="Manuals">Manuals</a> → <a href="http://www.postgresql.org/docs/9.3/static/index.html">PostgreSQL 9.3</a>
</div>
<div id="docVersions">

This page in other versions:

	
	
	<a href="http://www.postgresql.org/docs/9.2/static/sql-set-constraints.html" title="This page in version 9.2">9.2</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/9.1/static/sql-set-constraints.html" title="This page in version 9.1">9.1</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/9.0/static/sql-set-constraints.html" title="This page in version 9.0">9.0</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.4/static/sql-set-constraints.html" title="This page in version 8.4">8.4</a>
	



&nbsp;|&nbsp; Unsupported versions:

	
	
	<b>9.3</b>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.3/static/sql-set-constraints.html" title="This page in version 8.3" rel="nofollow">8.3</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.2/static/sql-set-constraints.html" title="This page in version 8.2" rel="nofollow">8.2</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.1/static/sql-set-constraints.html" title="This page in version 8.1" rel="nofollow">8.1</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.0/static/sql-set-constraints.html" title="This page in version 8.0" rel="nofollow">8.0</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/7.4/static/sql-set-constraints.html" title="This page in version 7.4" rel="nofollow">7.4</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/7.3/static/sql-set-constraints.html" title="This page in version 7.3" rel="nofollow">7.3</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/7.2/static/sql-set-constraints.html" title="This page in version 7.2" rel="nofollow">7.2</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/7.1/static/sql-set-constraints.html" title="This page in version 7.1" rel="nofollow">7.1</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/devel/static/sql-set-constraints.html" title="This page in version devel" rel="nofollow">devel</a>
	


</div>
</div>

<div id="docContent">
<div class="NAVHEADER">
  <table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
    <tbody><tr>
      <th colspan="5" align="center" valign="bottom"><a href="http://www.postgresql.org/docs/9.3/static/index.html">PostgreSQL 9.3beta2 Documentation</a></th>
    </tr>

    <tr>
      <td width="10%" align="left" valign="top"><a title="SET" href="http://www.postgresql.org/docs/9.3/static/sql-set.html" accesskey="P">Prev</a></td>

      <td width="10%" align="left" valign="top"><a href="http://www.postgresql.org/docs/9.3/static/sql-commands.html" accesskey="U">Up</a></td>

      <td width="60%" align="center" valign="bottom"></td>

      <td width="20%" align="right" valign="top"><a title="SET ROLE" href="http://www.postgresql.org/docs/9.3/static/sql-set-role.html" accesskey="N">Next</a></td>
    </tr>
  </tbody></table>
  <hr class="c1" width="100%">
</div>

<h1><a name="SQL-SET-CONSTRAINTS" id="SQL-SET-CONSTRAINTS"></a>SET
CONSTRAINTS</h1>

<div class="REFNAMEDIV">
  <a name="AEN81026" id="AEN81026"></a>

  <h2>Name</h2>SET CONSTRAINTS&nbsp;--&nbsp;set constraint check
  timing for the current transaction
</div>

<div class="REFSYNOPSISDIV">
  <a name="AEN81031" id="AEN81031"></a>

  <h2>Synopsis</h2>
  <pre class="SYNOPSIS">SET CONSTRAINTS { ALL | <tt class="REPLACEABLE c2">name</tt> [, ...] } { DEFERRED | IMMEDIATE }
</pre>
</div>

<div class="REFSECT1">
  <a name="AEN81034" id="AEN81034"></a>

  <h2>Description</h2>

  <p><tt class="COMMAND">SET CONSTRAINTS</tt> sets the behavior of
  constraint checking within the current transaction. <tt class="LITERAL">IMMEDIATE</tt> constraints are checked at the end of
  each statement. <tt class="LITERAL">DEFERRED</tt> constraints are
  not checked until transaction commit. Each constraint has its own
  <tt class="LITERAL">IMMEDIATE</tt> or <tt class="LITERAL">DEFERRED</tt> mode.</p>

  <p>Upon creation, a constraint is given one of three
  characteristics: <tt class="LITERAL">DEFERRABLE INITIALLY
  DEFERRED</tt>, <tt class="LITERAL">DEFERRABLE INITIALLY
  IMMEDIATE</tt>, or <tt class="LITERAL">NOT DEFERRABLE</tt>. The
  third class is always <tt class="LITERAL">IMMEDIATE</tt> and is
  not affected by the <tt class="COMMAND">SET CONSTRAINTS</tt>
  command. The first two classes start every transaction in the
  indicated mode, but their behavior can be changed within a
  transaction by <tt class="COMMAND">SET CONSTRAINTS</tt>.</p>

  <p><tt class="COMMAND">SET CONSTRAINTS</tt> with a list of
  constraint names changes the mode of just those constraints
  (which must all be deferrable). Each constraint name can be
  schema-qualified. The current schema search path is used to find
  the first matching name if no schema name is specified.
  <tt class="COMMAND">SET CONSTRAINTS ALL</tt> changes the mode of
  all deferrable constraints.</p>

  <p>When <tt class="COMMAND">SET CONSTRAINTS</tt> changes the mode
  of a constraint from <tt class="LITERAL">DEFERRED</tt> to
  <tt class="LITERAL">IMMEDIATE</tt>, the new mode takes effect
  retroactively: any outstanding data modifications that would have
  been checked at the end of the transaction are instead checked
  during the execution of the <tt class="COMMAND">SET
  CONSTRAINTS</tt> command. If any such constraint is violated, the
  <tt class="COMMAND">SET CONSTRAINTS</tt> fails (and does not
  change the constraint mode). Thus, <tt class="COMMAND">SET
  CONSTRAINTS</tt> can be used to force checking of constraints to
  occur at a specific point in a transaction.</p>

  <p>Currently, only <tt class="LITERAL">UNIQUE</tt>, <tt class="LITERAL">PRIMARY KEY</tt>, <tt class="LITERAL">REFERENCES</tt>
  (foreign key), and <tt class="LITERAL">EXCLUDE</tt> constraints
  are affected by this setting. <tt class="LITERAL">NOT NULL</tt>
  and <tt class="LITERAL">CHECK</tt> constraints are always checked
  immediately when a row is inserted or modified (<span class="emphasis EMPHASIS c3">not</span> at the end of the statement).
  Uniqueness and exclusion constraints that have not been declared
  <tt class="LITERAL">DEFERRABLE</tt> are also checked
  immediately.</p>

  <p>The firing of triggers that are declared as <span class="QUOTE">"constraint triggers"</span> is also controlled by this
  setting — they fire at the same time that the associated
  constraint should be checked.</p>
</div>

<div class="REFSECT1">
  <a name="AEN81070" id="AEN81070"></a>

  <h2>Notes</h2>

  <p>Because <span class="PRODUCTNAME">PostgreSQL</span> does not
  require constraint names to be unique within a schema (but only
  per-table), it is possible that there is more than one match for
  a specified constraint name. In this case <tt class="COMMAND">SET
  CONSTRAINTS</tt> will act on all matches. For a
  non-schema-qualified name, once a match or matches have been
  found in some schema in the search path, schemas appearing later
  in the path are not searched.</p>

  <p>This command only alters the behavior of constraints within
  the current transaction. Thus, if you execute this command
  outside of a transaction block (<tt class="COMMAND">BEGIN</tt>/<tt class="COMMAND">COMMIT</tt> pair), it
  will not appear to have any effect.</p>
</div>

<div class="REFSECT1">
  <a name="AEN81078" id="AEN81078"></a>

  <h2>Compatibility</h2>

  <p>This command complies with the behavior defined in the SQL
  standard, except for the limitation that, in <span class="PRODUCTNAME">PostgreSQL</span>, it does not apply to <tt class="LITERAL">NOT NULL</tt> and <tt class="LITERAL">CHECK</tt>
  constraints. Also, <span class="PRODUCTNAME">PostgreSQL</span>
  checks non-deferrable uniqueness constraints immediately, not at
  end of statement as the standard would suggest.</p>
</div>

<div class="NAVFOOTER">
  <hr class="c1" width="100%">

  <table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
    <tbody><tr>
      <td width="33%" align="left" valign="top"><a href="http://www.postgresql.org/docs/9.3/static/sql-set.html" accesskey="P">Prev</a></td>

      <td width="34%" align="center" valign="top"><a href="http://www.postgresql.org/docs/9.3/static/index.html" accesskey="H">Home</a></td>

      <td width="33%" align="right" valign="top"><a href="http://www.postgresql.org/docs/9.3/static/sql-set-role.html" accesskey="N">Next</a></td>
    </tr>

    <tr>
      <td width="33%" align="left" valign="top">SET</td>

      <td width="34%" align="center" valign="top"><a href="http://www.postgresql.org/docs/9.3/static/sql-commands.html" accesskey="U">Up</a></td>

      <td width="33%" align="right" valign="top">SET ROLE</td>
    </tr>
  </tbody></table>
</div>

</div>

<div id="docComments">



</div>

<div id="docFooter">
    <a href="http://www.postgresql.org/about/privacypolicy">Privacy Policy</a> |
    <a href="http://www.postgresql.org/about/">About PostgreSQL</a><br>
Copyright © 1996-2013 The PostgreSQL Global Development Group
</div>
</div>
</div>


</body></html>